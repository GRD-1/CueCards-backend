generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("POSTGRES_URL")
}

model User {
  id           Int          @id @default(autoincrement())
  email        String       @unique @db.VarChar(100)
  nickname     String?      @db.VarChar
  avatar       String?      @db.VarChar
  password     String       @db.VarChar
  createdAt    DateTime     @default(now()) @db.Timestamp(6)
  updatedAt    DateTime     @default(now()) @updatedAt @db.Timestamp(6)
  deleteMark   Boolean      @default(false)
  cards        Card[]       @relation("AuthorRelation")
  dictionaries Dictionary[] @relation("AuthorRelation")

  @@map("users")
}

model Language {
  id         Int      @id() @default(autoincrement())
  name       String   @unique @db.VarChar
  acronym    String   @unique @db.VarChar
  createdAt  DateTime @default(now()) @db.Timestamp(6)
  updatedAt  DateTime @default(now()) @updatedAt @db.Timestamp(6)
  deleteMark Boolean  @default(false)
  fsCards    Card[]   @relation("FsLanguageRelation")
  bsCards    Card[]   @relation("BsLanguageRelation")

  @@map("languages")
}

model Card {
  id                Int       @id @default(autoincrement())
  authorId          Int?
  fsLanguage        String
  fsValue           String    @db.VarChar
  fsDescription     String    @default("") @db.VarChar
  fsMeaningVariants String[]
  fsWrongMeanings   String[]
  fsTranscription   String    @db.VarChar
  fsSynonyms        String[]
  fsAudio           String    @db.VarChar
  fsHint            String    @db.VarChar
  bsLanguage        String
  bsValue           String    @db.VarChar
  bsDescription     String    @default("") @db.VarChar
  bsMeaningVariants String[]
  bsWrongMeanings   String[]
  bsTranscription   String    @db.VarChar
  bsSynonyms        String[]
  bsAudio           String    @db.VarChar
  bsHint            String    @db.VarChar
  tags              String[]
  createdAt         DateTime  @default(now()) @db.Timestamp(6)
  updatedAt         DateTime  @default(now()) @updatedAt @db.Timestamp(6)
  deleteMark        Boolean   @default(false)
  users             User?     @relation("AuthorRelation", fields: [authorId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  fsLang            Language? @relation("FsLanguageRelation", fields: [fsLanguage], references: [acronym])
  bsLang            Language? @relation("BsLanguageRelation", fields: [bsLanguage], references: [acronym])

  @@map("cards")
}

model Dictionary {
  id         Int      @id() @default(autoincrement())
  authorId   Int?
  title      String   @unique @db.VarChar
  tags       String[]
  createdAt  DateTime @default(now()) @db.Timestamp(6)
  updatedAt  DateTime @default(now()) @updatedAt @db.Timestamp(6)
  deleteMark Boolean  @default(false)
  users      User?    @relation("AuthorRelation", fields: [authorId], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@map("dictionaries")
}
